<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Christian â€” 6th Grade Assignments (Canvas)</title>
  <meta name="description" content="Christian â€” 6th Grade assignments with direct Canvas links." />
  <style>
    :root{
      --bg1:#0e1a2b; --bg2:#14243a;
      --grad1:#6a8dff; --grad2:#7b5cff;
      --ink:#1e293b; --muted:#5b6b86; --card:#ffffff;
      --good:#38a169; --warn:#e53e3e; --cold:#4299e1; --past:#9f7aea;
    }
    *{box-sizing:border-box;margin:0;padding:0}
    body{
      font-family: system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif;
      color:#0f172a; background: radial-gradient(1200px 600px at 10% -10%, #1b2a46, transparent 55%),
                 radial-gradient(900px 600px at 110% 10%, #1c2e55, transparent 55%),
                 linear-gradient(180deg, var(--bg1), var(--bg2));
      min-height:100vh; padding:28px 20px 40px;
    }
    .wrap{max-width:1200px;margin:0 auto}
    .header{
      background: linear-gradient(135deg, rgba(106,141,255,.2), rgba(123,92,255,.2));
      border:1px solid rgba(255,255,255,.16);
      box-shadow: 0 10px 30px rgba(0,0,0,.25), inset 0 1px 0 rgba(255,255,255,.08);
      border-radius:18px; padding:22px 22px 18px; color:#e6edf3;
      position:relative; overflow:hidden;
    }
    .header:after{
      content:""; position:absolute; inset:0;
      background: linear-gradient(90deg, rgba(106,141,255,.25), rgba(123,92,255,.1), rgba(106,141,255,.25));
      mix-blend-mode: screen; pointer-events:none;
    }
    h1{font-size:clamp(22px, 3.2vw, 34px); font-weight:900; letter-spacing:.3px}
    .subtitle{opacity:.9; margin-top:6px}
    .legend{display:flex; gap:8px; flex-wrap:wrap; margin-top:14px}
    .chip{
      display:inline-flex; align-items:center; gap:8px;
      padding:8px 12px; border-radius:999px; font-weight:700; font-size:12px;
      border:1px solid rgba(255,255,255,.18); background:rgba(255,255,255,.08); color:#e6edf3;
    }
    .chip .dot{width:8px;height:8px;border-radius:50%}
    .dot.warn{background:var(--warn)} .dot.good{background:var(--good)}
    .dot.cold{background:var(--cold)} .dot.past{background:var(--past)}

    .container{
      margin-top:16px; background:rgba(255,255,255,.9); backdrop-filter: blur(10px);
      border-radius:20px; box-shadow: 0 20px 40px rgba(0,0,0,.20); padding:28px;
      border:1px solid rgba(255,255,255,.6);
    }
    .summary{
      display:grid; grid-template-columns: repeat(4, minmax(0,1fr)); gap:12px; margin-bottom:18px;
    }
    .stat{
      background: #f8fafc; border:1px solid #e2e8f0; border-radius:14px; padding:14px 16px;
    }
    .stat .num{font-size:28px; font-weight:900; color:#0f172a}
    .stat .lbl{color:#475569}

    .assignments-grid{
      display:grid; grid-template-columns: repeat(auto-fit, minmax(320px,1fr)); gap:16px;
    }
    .assignment-card{
      position:relative; background:var(--card); border-radius:16px; padding:18px 18px 20px;
      border-left:5px solid transparent; box-shadow: 0 10px 26px rgba(2,6,23,.12);
      transition: transform .2s ease, box-shadow .2s ease;
    }
    .assignment-card:hover{ transform: translateY(-3px); box-shadow: 0 16px 34px rgba(2,6,23,.18); }
    .assignment-title{font-size:18px; font-weight:800; color:var(--ink); line-height:1.25; margin-bottom:8px}
    .course-info{color:var(--muted); font-weight:600; margin-bottom:10px}
    .due-date{display:flex; align-items:center; gap:8px; font-weight:700; margin-bottom:14px}
    .due-date-icon{width:16px;height:16px}
    .status-badge{
      position:absolute; top:10px; right:10px; padding:6px 10px; border-radius:999px; font-size:11px; font-weight:800; color:#fff;
    }
    .assignment-link{
      display:inline-block; text-decoration:none; color:#001022; font-weight:800;
      padding:10px 14px; border-radius:10px; background: linear-gradient(135deg, var(--grad1), var(--grad2));
      box-shadow: 0 6px 14px rgba(106,141,255,.35); transition: transform .15s ease, box-shadow .15s ease;
    }
    .assignment-link:hover{ transform: translateY(-1px); box-shadow: 0 10px 18px rgba(106,141,255,.45); }

    /* Themes per status */
    .urgent{ border-left-color: var(--warn); background: linear-gradient(180deg, #fff6f6, #ffffff); }
    .urgent .due-date{ color: var(--warn); } .urgent .status-badge{ background: var(--warn); }
    .completed{ border-left-color: var(--good); background: linear-gradient(180deg, #f3fff7, #ffffff); }
    .completed .due-date{ color: var(--good);} .completed .status-badge{ background: var(--good);}
    .no-due{ border-left-color: var(--cold); background: linear-gradient(180deg, #f0f8ff, #ffffff); }
    .no-due .due-date{ color: var(--cold);} .no-due .status-badge{ background: var(--cold);}
    .past-due{ border-left-color: var(--past); background: linear-gradient(180deg, #faf5ff, #ffffff); }
    .past-due .due-date{ color: var(--past);} .past-due .status-badge{ background: var(--past);}

    @media (max-width: 860px){
      .container{padding:20px}
      .summary{grid-template-columns: 1fr 1fr}
    }
  </style>
</head>
<body>
  <div class="wrap">
    <section class="header">
      <h1>ðŸŽ’ Christian â€” 6th Grade Assignments (Canvas)</h1>
      <div class="subtitle">Live links to Canvas assignments. This page updates automatically from the Canvas calendar feed.</div>
      <div class="legend" aria-label="Legend">
        <span class="chip"><span class="dot warn"></span> Due Today</span>
        <span class="chip"><span class="dot past"></span> Past Due</span>
        <span class="chip"><span class="dot cold"></span> No Due Date</span>
        <span class="chip"><span class="dot good"></span> Completed</span>
      </div>
    </section>

    <main class="container">
      <!-- Summary KPIs (auto-filled below) -->
      <section class="summary" aria-label="Summary">
        <div class="stat">
          <div class="num" id="kpi-total">â€”</div>
          <div class="lbl">Total Assignments</div>
        </div>
        <div class="stat">
          <div class="num" id="kpi-today">â€”</div>
          <div class="lbl">Due Today</div>
        </div>
        <div class="stat">
          <div class="num" id="kpi-complete">â€”</div>
          <div class="lbl">Completed</div>
        </div>
        <div class="stat">
          <div class="num" id="kpi-nodue">â€”</div>
          <div class="lbl">No Due Date</div>
        </div>
      </section>

      <!-- Assignment cards injected here -->
      <section class="assignments-grid" id="grid">
        <p style="color:#475569">Loading assignmentsâ€¦</p>
      </section>
    </main>
  </div>

  <!-- Loader: pulls docs/assignments.json built by the GitHub Action -->
  <script>
  (async () => {
    const grid = document.getElementById('grid');
    const set = (id, v) => document.getElementById(id).textContent = v;

    const badgeFor = s => s==='urgent'?'Due Today':s==='past-due'?'Past Due':s==='no-due'?'No Due Date':'Upcoming';
    const clsFor = s => s==='urgent'?'urgent':s==='past-due'?'past-due':s==='no-due'?'no-due':'';

    const dateRow = (iso) => {
      const txt = iso ? new Date(iso).toLocaleString() : 'No Due Date';
      return `
        <div class="due-date">
          <svg class="due-date-icon" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
            <path fill-rule="evenodd" d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z" clip-rule="evenodd"></path>
          </svg>
          ${txt}
        </div>`;
    };

    try {
      const res = await fetch('./assignments.json', { cache: 'no-store' });
      if (!res.ok) throw new Error('No assignments.json yet');
      const items = await res.json();

      // KPIs
      set('kpi-total', items.length);
      set('kpi-today', items.filter(i=>i.status==='urgent').length);
      set('kpi-complete', 0); // ICS canâ€™t tell completion
      set('kpi-nodue', items.filter(i=>i.status==='no-due').length);

      // Cards
      grid.innerHTML = items.map(i => `
        <article class="assignment-card ${clsFor(i.status)}">
          <div class="status-badge">${badgeFor(i.status)}</div>
          <div class="assignment-title">${i.title}</div>
          <div class="course-info">${i.course||''}</div>
          ${dateRow(i.due_at)}
          ${i.url ? `<a class="assignment-link" href="${i.url}" target="_blank" rel="noopener">View Assignment</a>` : ''}
        </article>
      `).join('');
    } catch (e) {
      grid.innerHTML = '<p style="color:#b91c1c">assignments.json not found yet â€” the sync will create it shortly.</p>';
      console.error(e);
    }
  })();
  </script>
</body>
</html>
